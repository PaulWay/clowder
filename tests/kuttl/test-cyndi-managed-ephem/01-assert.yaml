---
apiVersion: kuttl.dev/v1beta1
kind: TestAssert
---
apiVersion: cyndi.cloud.redhat.com/v1alpha1
kind: CyndiPipeline
metadata:
  name: myapp
  namespace: test-cyndi-managed-ephem-kafka
  ownerReferences:
  - apiVersion: cloud.redhat.com/v1alpha1
    kind: ClowdEnvironment
    name: test-cyndi-managed-ephem
spec:
  appName: myapp
  connectCluster: test-cyndi-managed-ephem-cluster
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cyndi
  namespace: test-cyndi-managed-ephem-kafka
  ownerReferences:
  - apiVersion: cloud.redhat.com/v1alpha1
    kind: ClowdEnvironment
    name: test-cyndi-managed-ephem
data:
  connector.topic: "test-cyndi-managed-ephem-platform.inventory.events"
  connector.deadletterqueue.topic.name: "test-cyndi-managed-ephem-platform.cyndi.dlq"
  connector.topic.replication.factor: "3"
---
apiVersion: v1
kind: Secret
metadata:
  name: test-cyndi-managed-ephem-host-inventory-db-cyndi
  namespace: test-cyndi-managed-ephem-kafka
  ownerReferences:
  - apiVersion: cloud.redhat.com/v1alpha1
    kind: ClowdEnvironment
    name: test-cyndi-managed-ephem
---
apiVersion: v1
kind: Secret
metadata:
  name: test-cyndi-managed-ephem-myapp-db-cyndi
  namespace: test-cyndi-managed-ephem-kafka
  ownerReferences:
  - apiVersion: cloud.redhat.com/v1alpha1
    kind: ClowdEnvironment
    name: test-cyndi-managed-ephem
